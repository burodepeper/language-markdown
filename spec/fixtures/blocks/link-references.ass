@146
"[foo]: /url "title""+
""+
"[foo]" {
  source.text.md {
    "[foo]: /url "title"" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/url" {
          destination.link.md {
            "/url": uri.underline.link.md
          }
        }
        " "
        ""title"" {
          title.link.meta.md {
            '"': punctuation.md
            "title"
            '"': punctuation.md
          }
        }
      }
    }
    ""
    "[foo]" {
      label.link.string.md {
        "[": punctuation.md
        "foo"
        "]": punctuation.md
      }
    }
  }
}

# NOTE multiline not supported
@147
"[foo]:"+
"   /url"+
"        'the title'" {
  source.text.md {
    "[foo]:"
    "   /url"
    "        'the title'"
  }
}

# TODO
# @148
# "[Foo*bar\]]:my_(url) 'title (with parens)'"+
# ""+
# "[Foo*bar\]]" {
#
# }

# NOTE multiline not supported
@149
"[Foo bar]:"+
"<my url>"+
"'title'" {
  source.text.md {
    "[Foo bar]:"
    "<my url>"
    "'title'"
  }
}

# NOTE multiline not supported
@150
"[foo]: /url '"+
"title"+
"line1"+
"line2"+
"'" {
  source.text.md {
    "[foo]: /url '" {
      "[foo]: /url" {
        reference.link.markup.entity.md {
          "[foo]" {
            label.link.string.md {
              "[": punctuation.md
              "foo"
              "]": punctuation.md
            }
          }
          ":": punctuation.md
          " "
          "/url" {
            destination.link.md {
              "/url": uri.underline.link.md
            }
          }
        }
      }
      " '"
    }
    "title"
    "line1"
    "line2"
    "'"
  }
}

# NOTE multiline not supported
@151
"[foo]: /url 'title"+
""+
"with blank line'" {
  source.text.md {
    "[foo]: /url 'title" {
      "[foo]: /url" {
        reference.link.markup.entity.md {
          "[foo]" {
            label.link.string.md {
              "[": punctuation.md
              "foo"
              "]": punctuation.md
            }
          }
          ":": punctuation.md
          " "
          "/url" {
            destination.link.md {
              "/url": uri.underline.link.md
            }
          }
        }
      }
      " 'title"
    }
    ""
    "with blank line'"
  }
}

@152
"[foo]:"+
"/url" {
  source.text.md {
    "[foo]:"
    "/url"
  }
}

@153
"[foo]:": source.text.md

# TODO
# @154
# "[foo]: /url\bar\*baz "foo\"bar\baz""+
# ""+
# "[foo]" {
#
# }

@155
"[foo]"+
""+
"[foo]: url" {
  source.text.md {
    "[foo]" {
      label.link.string.md {
        "[": punctuation.md
        "foo"
        "]": punctuation.md
      }
    }
    ""
    "[foo]: url" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "url" {
          destination.link.md {
            "url": uri.underline.link.md
          }
        }
      }
    }
  }
}

# NOTE
# Removed @156, because it is not related to syntax highlighting
# Removed @157, because it is not related to syntax highlighting
# @burodepeper

@158
"[ΑΓΩ]: /φου"+
""+
"[αγω]" {
  source.text.md {
    "[ΑΓΩ]: /φου" {
      reference.link.markup.entity.md {
        "[ΑΓΩ]" {
          label.link.string.md {
            "[": punctuation.md
            "ΑΓΩ"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/φου" {
          destination.link.md {
            "/φου": uri.underline.link.md
          }
        }
      }
    }
    ""
    "[αγω]" {
      label.link.string.md {
        "[": punctuation.md
        "αγω"
        "]": punctuation.md
      }
    }
  }
}

@159
"[foo]: /url" {
  source.text.md {
    "[foo]: /url" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/url" {
          destination.link.md {
            "/url": uri.underline.link.md
          }
        }
      }
    }
  }
}

@160
"["+
"foo"+
"]: /url"+
"bar" {
  source.text.md {
    "["
    "foo"
    "]: /url"
    "bar"
  }
}

@161
"[foo]: /url "title" ok" {
  source.text.md {
    "[foo]: /url "title"" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/url" {
          destination.link.md {
            "/url": uri.underline.link.md
          }
        }
        " "
        ""title"" {
          title.link.meta.md {
            '"': punctuation.md
            "title"
            '"': punctuation.md
          }
        }
      }
    }
    " ok"
  }
}

@162
"[foo]: /url"+
""title" ok" {
  source.text.md {
    "[foo]: /url" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/url" {
          destination.link.md {
            "/url": uri.underline.link.md
          }
        }
      }
    }
    ""title" ok"
  }
}

@163
"    [foo]: /url "title"" {
  source.text.md {
    "    "
    "[foo]: /url "title"" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/url" {
          destination.link.md {
            "/url": uri.underline.link.md
          }
        }
        " "
        ""title"" {
          title.link.meta.md {
            '"': punctuation.md
            "title"
            '"': punctuation.md
          }
        }
      }
    }
  }
}

@164
"```"+
"[foo]: /url"+
"```" {
  source.text.md {
    fenced.code.md {
      "```": punctuation.md
      source.md {
        "[foo]: /url"
      }
      "```": punctuation.md
    }
  }
}

# NOTE can't detect multiline relations
@165
"Foo"+
"[bar]: /baz" {
  source.text.md {
    "Foo"
    "[bar]: /baz" {
      reference.link.markup.entity.md {
        "[bar]" {
          label.link.string.md {
            "[": punctuation.md
            "bar"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/baz" {
          destination.link.md {
            "/baz": uri.underline.link.md
          }
        }
      }
    }
  }
}

@166
"# [Foo]" {
  source.text.md {
    heading.support.markup.md {
      heading-1.md {
        "#": punctuation.md
        " "
        "[Foo]" {
          label.link.string.md {
            "[": punctuation.md
            "Foo"
            "]": punctuation.md
          }
        }
      }
    }
  }
}

@167
"[foo]: /foo-url "foo""+
"[bar]: /bar-url"+
"  "bar""+
"[baz]: /baz-url"+
""+
"[foo],"+
"[bar],"+
"[baz]" {
  source.text.md {
    "[foo]: /foo-url "foo"" {
      reference.link.markup.entity.md {
        "[foo]" {
          label.link.string.md {
            "[": punctuation.md
            "foo"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/foo-url" {
          destination.link.md {
            "/foo-url": uri.underline.link.md
          }
        }
        " "
        ""foo"" {
          title.link.meta.md {
            '"': punctuation.md
            "foo"
            '"': punctuation.md
          }
        }
      }
    }
    "[bar]: /bar-url" {
      reference.link.markup.entity.md {
        "[bar]" {
          label.link.string.md {
            "[": punctuation.md
            "bar"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/bar-url" {
          destination.link.md {
            "/bar-url": uri.underline.link.md
          }
        }
      }
    }
    "  "bar""
    "[baz]: /baz-url" {
      reference.link.markup.entity.md {
        "[baz]" {
          label.link.string.md {
            "[": punctuation.md
            "baz"
            "]": punctuation.md
          }
        }
        ":": punctuation.md
        " "
        "/baz-url" {
          destination.link.md {
            "/baz-url": uri.underline.link.md
          }
        }
      }
    }
    ""
    "[foo]," {
      label.link.string.md {
        "[": punctuation.md
        "foo"
        "]": punctuation.md
      }
      ","
    }
    "[bar]," {
      label.link.string.md {
        "[": punctuation.md
        "bar"
        "]": punctuation.md
      }
      ","
    }
    "[baz]" {
      label.link.string.md {
        "[": punctuation.md
        "baz"
        "]": punctuation.md
      }
    }
  }
}

@168
"> [foo]: /url" {
  source.text.md {
    "> [foo]: /url" {
      quote.markup.md {
        ">": punctuation.md
        " "
        reference.link.markup.entity.md {
          "[foo]" {
            label.link.string.md {
              "[": punctuation.md
              "foo"
              "]": punctuation.md
            }
          }
          ":": punctuation.md
          " "
          "/url" {
            destination.link.md {
              "/url": uri.underline.link.md
            }
          }
        }
      }
    }
  }
}
