@math/1
"Given some function $f \in \{0,1\}^*\to\{0,1\}^*$, there must exist ..." {
  text.md {
    "Given some function "
    "$f \in \{0,1\}^*\to\{0,1\}^*$" {
      inline.math.markup.md {
        "$": punctuation.md
        "f \in \{0,1\}^*\to\{0,1\}^*"
        "$": punctuation.md
      }
    }
    ", there must exist ..."
  }
}

@math/2a
"$$"+
"f \in \{0,1\}^*\to\{0,1\}^*"+
"$$" {
  text.md {
    block.math.markup.md {
      "$$": punctuation.md
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "$$": punctuation.md
    }
  }
}

@math/2a-1
"\\["+
"f \in \{0,1\}^*\to\{0,1\}^*"+
"\\]" {
  text.md {
    block.math.markup.md {
      "\\[": punctuation.definition.string.begin.latex
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "\\]": punctuation.definition.string.end.latex
    }
  }
}

@math/2a-2
"\begin{equation}"+
"f \in \{0,1\}^*\to\{0,1\}^*"+
"\end{equation}" {
  text.md {
    block.math.markup.md {
      "\begin": support.function.be.latex
      "{": punctuation.definition.arguments.begin.latex
      "equation": variable.parameter.function.latex
      "}": punctuation.definition.arguments.end.latex
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "\end": support.function.be.latex
      "{": punctuation.definition.arguments.begin.latex
      "equation": variable.parameter.function.latex
      "}": punctuation.definition.arguments.end.latex
    }
  }
}

@math/2b
"$$f \in \{0,1\}^*\to\{0,1\}^*$$" {
  text.md {
    block.math.markup.md {
      "$$": punctuation.md
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "$$": punctuation.md
    }
  }
}

@math/2b-1
"\\[f \in \{0,1\}^*\to\{0,1\}^*\\]" {
  text.md {
    block.math.markup.md {
      "\\[": punctuation.definition.string.begin.latex
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "\\]": punctuation.definition.string.end.latex
    }
  }
}

@math/2b-2
"\begin{equation}f \in \{0,1\}^*\to\{0,1\}^*\end{equation}" {
  text.md {
    block.math.markup.md {
      "\begin": support.function.be.latex
      "{": punctuation.definition.arguments.begin.latex
      "equation": variable.parameter.function.latex
      "}": punctuation.definition.arguments.end.latex
      "f \in \{0,1\}^*\to\{0,1\}^*"
      "\end": support.function.be.latex
      "{": punctuation.definition.arguments.begin.latex
      "equation": variable.parameter.function.latex
      "}": punctuation.definition.arguments.end.latex
    }
  }
}

@math/3a
"This is a $variable" {
  text.md {
    "This is a $variable"
  }
}

@math/3a-1
"An equation needs \[one more backslash\]" {
  text.md {
    "An equation needs "
    "\[": escape.constant.md
    "one more backslash"
    "\]": escape.constant.md
  }
}

@math/3a-2
"An equation needs \\\[one less backslash\\\]" {
  text.md {
    "An equation needs "
    "\\": escape.constant.md
    "\[": escape.constant.md
    "one less backslash"
    "\\": escape.constant.md
    "\]": escape.constant.md
  }
}

@math/3b
"This is a `$variable`" {
  text.md {
    "This is a "
    "`$variable`" {
      code.raw.markup.md {
        '`': punctuation.md
        '$variable'
        '`': punctuation.md
      }
    }
  }
}

@math/3b-1
"This is an `\\[inline code\\]`" {
  text.md {
    "This is an "
    "`\\[not an equation\\]`" {
      code.raw.markup.md {
        '`': punctuation.md
        '\\[inline code\\]'
        '`': punctuation.md
      }
    }
  }
}

@math/3b-2
"This is an `\begin{equation} inline code`" {
  text.md {
    "This is an "
    "`\\[not an equation\\]`" {
      code.raw.markup.md {
        '`': punctuation.md
        '\begin{equation} inline code'
        '`': punctuation.md
      }
    }
  }
}

@math/4
"You owe me $10.000, not $10" {
  text.md {
    "You owe me $10.000, not $10"
  }
}

@math/5
"the reference image $I_r$ and the template image $I_t$." {
  text.md {
    "the reference image "
    "$I_r$" {
      inline.math.markup.md {
        "$": punctuation.md
        "I_r"
        "$": punctuation.md
      }
    }
    " and the template image "
    "$I_t$" {
      inline.math.markup.md {
        "$": punctuation.md
        "I_t"
        "$": punctuation.md
      }
    }
    "."
  }
}

@math/6
"$$"+
"d_y(x) = D \del{f_r(x), f_t(y)}"+
"$$ {#eq:dist}" {
  text.md {
    block.math.markup.md {
      "$$": punctuation.md
      "d_y(x) = D \del{f_r(x), f_t(y)}"
      "$$": punctuation.md
      " {#eq:dist}"
    }
  }
}

@math/7
"$$"+
"d_y(x) = D \del{f_r(x), f_t(y)}"+
"$$"+
"# Heading"+
"$$"+
"d_y(x) = D \del{f_r(x), f_t(y)}"+
"$$ {#eq:dist}" {
  text.md {
    block.math.markup.md {
      "$$": punctuation.md
      "d_y(x) = D \del{f_r(x), f_t(y)}"
      "$$": punctuation.md
    }
    heading.markup.md {
      heading-1.md {
        '#': punctuation.md
        ' '
        'Heading'
      }
    }
    block.math.markup.md {
      "$$": punctuation.md
      "d_y(x) = D \del{f_r(x), f_t(y)}"
      "$$": punctuation.md
      " {#eq:dist}"
    }
  }
}

@math/8
"- Math in a list: $a + B$" {
  text.md {
    unordered.list.markup.md {
      "- ": punctuation.md
      "Math in a list: "
      "$a + B$" {
        inline.math.markup.md {
          "$": punctuation.md
          "a + B"
          "$": punctuation.md
        }
      }
    }
  }
}
